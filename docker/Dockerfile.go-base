# Dockerfile.go-base
FROM golang:1.19-alpine

# 필수 빌드 도구 설치
RUN apk add --no-cache git make build-base

# Non-root user 생성 (Defense-in-depth)
RUN adduser -D -s /bin/sh appuser

# 작업 디렉토리
WORKDIR /code

# Output 및 Workspace 디렉토리 생성 및 권한 설정
RUN mkdir -p /output /workspace && chown appuser:appuser /output /workspace
RUN chown -R appuser:appuser /code

# Non-root user로 전환
USER appuser
